-- cat db_creation.sql | sqlite3 project.db
CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username TEXT NOT NULL, hash TEXT NOT NULL, last_login TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, email text NOT NULL);
CREATE TABLE credit (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, user_id INTEGER UNIQUE NOT NULL, amount INTEGER NOT NULL DEFAULT 100, FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE);
CREATE TABLE links (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, description TEXT NOT NULL, origin TEXT NOT NULL UNIQUE, destination TEXT NOT NULL UNIQUE, created_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, modified_on TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, user_id INTEGER NOT NULL, title TEXT NOT NULL DEFAULT "title", FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE);
CREATE TABLE views (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, count INTEGER NOT NULL DEFAULT 0, last_viewed TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, link_id INTEGER UNIQUE,  FOREIGN KEY (link_id) REFERENCES links(id) ON DELETE CASCADE);
